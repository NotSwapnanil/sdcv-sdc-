<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rishra Jagadhatri Puja Parikrama 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:ital@0;1&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-bengali {
            font-family: 'Tiro Bangla', serif;
        }
        /*
         INSTRUCTION: After uploading your background image to the 'website_assets' bucket, 
         replace the placeholder URL below with the actual public URL from Supabase.
         It will look like: https://<YOUR-PROJECT-ID>.supabase.co/storage/v1/object/public/website_assets/your-image-name.jpg
        */
        .hero-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://dtikbekeakjofzmuceaw.supabase.co/storage/v1/object/public/website_assets/Jagadhatri-face-1-1-1024x818.jpg.jpg') no-repeat center center/cover;
        }
    </style>
</head>
<body class="bg-orange-50 text-gray-800">

    <!-- Header Section -->
    <header class="hero-bg text-white py-20 md:py-32">
        <div class="container mx-auto px-4 text-center">
            <h1 class="font-bengali text-5xl md:text-7xl font-bold mb-4 drop-shadow-lg">рж░рж┐рж╖рзЬрж╛ ржЬржЧржжрзНржзрж╛рждрзНрж░рзА ржкрзБржЬрзЛ ржкрж░рж┐ржХрзНрж░ржорж╛ - рзирзжрзирзл</h1>
            <p class="text-xl md:text-2xl font-semibold mb-6 drop-shadow-md">A Grand Competition of Creativity & Devotion</p>
            <p class="max-w-3xl mx-auto">Join us in this grand celebration and showcase your Puja to thousands, both online and offline. Stand a chance to win prestigious awards!</p>
            <a href="#register" class="mt-8 inline-block bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105">Register Your Puja Now</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-16">
        
        <!-- Competition Categories Section -->
        <section id="categories" class="mb-16">
            <h2 class="font-bengali text-4xl font-bold text-center mb-10 text-orange-800">ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛рж░ ржмрж┐ржнрж╛ржЧ</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Online Competition -->
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="text-2xl font-bold mb-4 text-orange-700">Online Competition</h3>
                    <p class="mb-4">Based on Facebook post views. The official video of your Puja, edited by our team, will be posted on our Facebook page. The top three videos with the highest views win.</p>
                    <ul class="space-y-2">
                        <li class="flex items-center"><span class="text-yellow-500 mr-2">ЁЯПЖ</span> <strong>First Prize</strong></li>
                        <li class="flex items-center"><span class="text-gray-400 mr-2">ЁЯПЖ</span> <strong>Second Prize</strong></li>
                        <li class="flex items-center"><span class="text-orange-400 mr-2">ЁЯПЖ</span> <strong>Third Prize</strong></li>
                    </ul>
                </div>
                <!-- Offline Competition -->
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-orange-200">
                    <h3 class="text-2xl font-bold mb-4 text-orange-700">Offline Competition</h3>
                    <p class="mb-4">Judged by our esteemed panel who will visit your pandal.</p>
                    <ul class="space-y-2">
                        <li class="font-semibold"><strong>Best Pratima (Idol):</strong> 1st, 2nd, 3rd</li>
                        <li class="font-semibold"><strong>Best Mandap (Pandal):</strong> 1st, 2nd, 3rd</li>
                        <li class="font-semibold"><strong>Best Poribesh (Ambiance):</strong> 1st, 2nd, 3rd</li>
                        <li class="mt-4 flex items-center text-xl text-red-700 font-bold"><span class="text-2xl mr-2">ЁЯПЖ</span> рж╕рзЗрж░рж╛рж░ рж╕рзЗрж░рж╛ (The Overall Best Puja)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Host of the Event Section -->
        <section id="host" class="mb-16">
            <h2 class="font-bengali text-4xl font-bold text-center mb-10 text-orange-800">ржЖрзЯрзЛржЬржХ</h2>
             <div class="bg-white p-8 rounded-2xl shadow-lg border border-orange-200 flex flex-col md:flex-row items-center gap-8">
                <div class="w-48 h-48 rounded-full overflow-hidden shadow-xl border-4 border-orange-300 flex-shrink-0">
                    <!-- 
                     INSTRUCTION: Upload your photo to the 'website_assets' bucket in Supabase.
                     Then, replace the placeholder 'src' below with the public URL of your photo.
                    -->
                    <img src="https://dtikbekeakjofzmuceaw.supabase.co/storage/v1/object/public/website_assets/E47F8A8F-2EDC-41DA-9D51-93EE4D7E95FB.jpeg" alt="Host of the Event" class="w-full h-full object-cover">
                </div>
                <div>
                    <h3 class="text-3xl font-bold text-orange-700">ржЕржнрж┐ржЬрж┐рзО ржмрж┐рж╢рзНржмрж╛рж╕</h3>
                    <p class="text-lg text-gray-600 mt-2">ржЖрзЯрзЛржЬржХ</p>
                    <p class="mt-4">рж░рж┐рж╖рзЬрж╛ ржЬржЧржжрзНржзрж╛рждрзНрж░рзА ржкрзБржЬрзЛ ржкрж░рж┐ржХрзНрж░ржорж╛ - рзирзжрзирзл 

ржлрзЗрж╕ржмрзБржХ рж▓рж╛ржЗржнрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржПржХржЯрж┐ ржЕржирж▓рж╛ржЗржи ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ рж╣ржмрзЗ! ржкрзНрж░ржержо рждрж┐ржиржЯрж┐ ржкрзБржЬрзЛржХрзЗ ржкрзБрж░рж╕рзНржХрзГржд ржХрж░рж╛ рж╣ржмрзЗ! 

ржПржЫрж╛рзЬрж╛ржУ ржЕржлрж▓рж╛ржЗржирзЗ ржкрзБржЬрзЛ ржкрж░рж┐ржХрзНрж░ржорж╛рж░ ржорж╛ржзрзНржпржорзЗ ржмрж┐ржЪрж╛рж░ржХрзЗрж░ ржмрж┐ржЪрж╛рж░рзЗ ржпрзЗрж╕ржм ржкрзБрж░рж╕рзНржХрж╛рж░ржЧрзБрж▓рж┐ ржерж╛ржХржмрзЗ -
рж╕рзЗрж░рж╛ рждрж┐ржиржЯрж┐ ржкрзНрж░рждрж┐ржорж╛, рж╕рзЗрж░рж╛ рждрж┐ржиржЯрж┐ ржоржирзНржбржк, рж╕рзЗрж░рж╛ рждрж┐ржиржЯрж┐ ржкрзБржЬрзЛрж░ ржкрж░рж┐ржмрзЗрж╢ ржПржмржВ ржПржХржЯрж┐ рж╕рзЗрж░рж╛рж░ рж╕рзЗрж░рж╛! 
ржкрзНрж░ржмрзЗрж╢ ржорзВрж▓рзНржп - рзирзжрзж ржЯрж╛ржХрж╛!
(ржЖржЬржЗ ржлрж░рзНржо ржлрж┐рж▓рж╛ржк ржХрж░рзБржи ржмрж╛ ржХрж▓ ржХрж░рзБржи)</p>
                </div>
            </div>
        </section>

        <!-- Registration Form Section -->
        <section id="register" class="bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-orange-200">
            <h2 class="font-bengali text-4xl font-bold text-center mb-2 text-orange-800">рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржлрж░рзНржо</h2>
            <p class="text-center text-gray-600 mb-8">Please fill out this form to officially register your Puja committee.</p>

            <form id="registration-form" class="space-y-8">
                
                <!-- Section 1: Puja Committee Details -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 border-b pb-2 text-orange-700">1. Puja Committee Details</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="committee-name" class="block text-sm font-medium text-gray-700">Name of the Puja Committee / Club <span class="text-red-500">*</span></label>
                            <input type="text" id="committee-name" name="committee-name" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                        </div>
                        <div>
                            <label for="establishment-year" class="block text-sm font-medium text-gray-700">Year of Puja Establishment <span class="text-red-500">*</span></label>
                            <input type="number" id="establishment-year" name="establishment-year" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                        </div>
                    </div>
                     <div class="mt-6">
                        <label for="pandal-address" class="block text-sm font-medium text-gray-700">Full Address of the Pandal (with landmark) <span class="text-red-500">*</span></label>
                        <textarea id="pandal-address" name="pandal-address" rows="3" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500"></textarea>
                    </div>
                </div>

                <!-- Section 2: Contact Person Details -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 border-b pb-2 text-orange-700">2. Contact Person Details</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="contact-name" class="block text-sm font-medium text-gray-700">Name of Main Contact Person <span class="text-red-500">*</span></label>
                            <input type="text" id="contact-name" name="contact-name" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                        </div>
                        <div>
                            <label for="contact-number" class="block text-sm font-medium text-gray-700">Contact Number (WhatsApp Preferred) <span class="text-red-500">*</span></label>
                            <input type="tel" id="contact-number" name="contact-number" required pattern="[0-9]{10}" title="Please enter a valid 10-digit mobile number" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                        </div>
                         <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email Address <span class="text-red-500">*</span></label>
                            <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                        </div>
                    </div>
                </div>

                <!-- Section 3: Payment Details -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 border-b pb-2 text-orange-700">3. Entry Fee Payment</h3>
                    <div class="bg-orange-50 p-6 rounded-lg">
                        <p class="text-lg font-semibold">Entry Fee: тВ╣200</p>
                        <p class="mt-2 text-center">Please pay the entry fee by scanning the QR code below and upload a screenshot.</p>
                        <div class="mt-4 flex flex-col items-center">
                            <!-- INSTRUCTION: Replace this placeholder with your actual QR code image file -->
                            <img src="https://dtikbekeakjofzmuceaw.supabase.co/storage/v1/object/public/website_assets/qr.jpeg" alt="Payment QR Code" class="rounded-lg shadow-md">
                            <p class="mt-2 text-sm text-gray-600">Scan to pay with any UPI app (GPay, PhonePe, etc.)</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                            <div>
                                <label for="transaction-id" class="block text-sm font-medium text-gray-700">Transaction ID / Reference No. <span class="text-red-500">*</span></label>
                                <input type="text" id="transaction-id" name="transaction-id" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label for="payment-screenshot" class="block text-sm font-medium text-gray-700">Upload Screenshot of Payment <span class="text-red-500">*</span></label>
                                <input type="file" id="payment-screenshot" name="payment-screenshot" required accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-100 file:text-orange-700 hover:file:bg-orange-200">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 4: Sponsorship Opportunity -->
                 <div>
                    <h3 class="text-xl font-semibold mb-4 border-b pb-2 text-orange-700">4. Sponsorship Opportunity</h3>
                    <div class="bg-gray-100 p-6 rounded-lg">
                        <p class="font-semibold">Become a Sponsor and Promote Your Brand!</p>
                        <p class="text-sm mt-1">Sponsoring is a great way to connect with the community. Our team will contact you with the packages.</p>
                        <fieldset class="mt-4">
                            <legend class="block text-sm font-medium text-gray-700 mb-2">Are you interested in sponsoring our event?</legend>
                            <div class="flex items-center space-x-6">
                                <div class="flex items-center">
                                    <input id="sponsor-yes" name="sponsorship-interest" type="radio" value="Yes" class="h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500">
                                    <label for="sponsor-yes" class="ml-2 block text-sm text-gray-900">Yes, please contact me.</label>
                                </div>
                                <div class="flex items-center">
                                    <input id="sponsor-no" name="sponsorship-interest" type="radio" value="No" checked class="h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500">
                                    <label for="sponsor-no" class="ml-2 block text-sm text-gray-900">No, thank you.</label>
                                </div>
                            </div>
                        </fieldset>
                        <div id="sponsor-details" class="hidden mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                             <div>
                                <label for="sponsor-name" class="block text-sm font-medium text-gray-700">Your Name / Company Name</label>
                                <input type="text" id="sponsor-name" name="sponsor-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label for="sponsor-contact" class="block text-sm font-medium text-gray-700">Your Contact Number</label>
                                <input type="tel" id="sponsor-contact" name="sponsor-contact" pattern="[0-9]{10}" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Final Confirmation -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 border-b pb-2 text-orange-700">5. Final Confirmation</h3>
                     <div class="flex items-start">
                        <div class="flex items-center h-5">
                            <input id="terms" name="terms" type="checkbox" required class="h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="terms" class="font-medium text-gray-700">I agree to the terms and conditions</label>
                            <p class="text-gray-500">The decision of the judges is final. Online views will be counted only from the official video. The committee can modify rules if necessary.</p>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-4">
                    <button id="submit-button" type="submit" class="w-full md:w-auto inline-flex justify-center items-center px-12 py-4 border border-transparent text-lg font-bold rounded-full shadow-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all">
                        <span id="button-text">Submit Registration</span>
                        <svg id="loading-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </button>
                </div>
            </form>
            
            <!-- Message area for success/error -->
            <div id="form-message" class="mt-8 text-center"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-orange-800 text-white mt-16">
        <div class="container mx-auto px-4 py-8 text-center">
            <p>&copy; 2025 Rishra Jagadhatri Puja Parikrama. All Rights Reserved.</p>
            <p class="mt-2">For any questions, please contact: <span class="font-semibold">9038816812</span></p>
            <p class="mt-2">Website Developed by: <span class="font-semibold">Swapnanil Das, 9330711699</span></p>
        </div>
    </footer>


<script type="module">
    const SUPABASE_URL = 'https://dtikbekeakjofzmuceaw.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aWtiZWtlYWtqb2Z6bXVjZWF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NDM2NjEsImV4cCI6MjA3MjIxOTY2MX0.JkRp9goAE0ZvPQxUXKdkAgaCuvKaWMUl8z2h1oMbsik';

    const { createClient } = supabase;
    const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('registration-form');
    const submitButton = document.getElementById('submit-button');
    const buttonText = document.getElementById('button-text');
    const loadingSpinner = document.getElementById('loading-spinner');
    const formMessage = document.getElementById('form-message');

    // Toggle sponsor fields
    const sponsorRadios = document.querySelectorAll('input[name="sponsorship-interest"]');
    const sponsorDetailsDiv = document.getElementById('sponsor-details');
    sponsorRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            sponsorDetailsDiv.classList.toggle('hidden', e.target.value !== 'Yes');
        });
    });

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Show loading state
        submitButton.disabled = true;
        buttonText.textContent = 'Submitting...';
        loadingSpinner.classList.remove('hidden');
        formMessage.textContent = '';

        const formData = new FormData(form);
        const screenshotFile = formData.get('payment-screenshot');

        if (!screenshotFile || screenshotFile.size === 0) {
            displayMessage('Please upload a payment screenshot.', 'error');
            resetButton();
            return;
        }

        try {
            // 1я╕ПтГг Upload screenshot to Supabase Storage
            const fileName = `${formData.get('committee-name').replace(/\s+/g, '_')}_${Date.now()}.jpg`;
            const { data: uploadData, error: uploadError } = await supabaseClient
                .storage
                .from('payment_screenshots')
                .upload(fileName, screenshotFile, {
                    cacheControl: '3600',
                    upsert: false
                });

            if (uploadError) throw new Error(`Upload failed: ${uploadError.message}`);

            const { data: publicData } = supabaseClient
                .storage
                .from('payment_screenshots')
                .getPublicUrl(fileName);

            const screenshotUrl = publicData.publicUrl;

            // 2я╕ПтГг Prepare data for database
            const registrationData = {
                committee_name: formData.get('committee-name'),
                establishment_year: formData.get('establishment-year'),
                pandal_address: formData.get('pandal-address'),
                contact_name: formData.get('contact-name'),
                contact_number: formData.get('contact-number'),
                email: formData.get('email'),
                transaction_id: formData.get('transaction-id'),
                screenshot_url: screenshotUrl,
                sponsorship_interest: formData.get('sponsorship-interest'),
                sponsor_name: formData.get('sponsor-name') || null,
                sponsor_contact: formData.get('sponsor-contact') || null
            };

            // 3я╕ПтГг Insert record into Supabase table
            const { error: insertError } = await supabaseClient
                .from('registrations')
                .insert([registrationData]);

            if (insertError) throw new Error(`Database submission failed: ${insertError.message}`);

            displayMessage('тЬЕ Thank you for registering! We have received your details and will contact you shortly.', 'success');
            form.reset();
            sponsorDetailsDiv.classList.add('hidden');

        } catch (error) {
            console.error('Submission error:', error);
            displayMessage(`тЭМ ${error.message}`, 'error');
        } finally {
            resetButton();
        }
    });

    function displayMessage(message, type) {
        formMessage.innerHTML = `<p class="${type === 'success' ? 'text-green-600' : 'text-red-600'} font-bold">${message}</p>`;
    }

    function resetButton() {
        submitButton.disabled = false;
        buttonText.textContent = 'Submit Registration';
        loadingSpinner.classList.add('hidden');
    }
</script>

</body>
</html>


